<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Flow - ‡∏£‡∏±‡∏ö‡∏à‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£</title>
    
    <!-- Google Site Verification Tag -->
    <meta name="google-site-verification" content="N285uTUonyzVnxui0WNbB9zO4dgUN0QNyBrugVbEZ2Y" />

    <!-- Google Fonts: Prompt -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            --primary-blue: #2563eb;
        }

        body { 
            font-family: 'Prompt', sans-serif; 
            color: #1e3a8a; 
            margin: 0;
            overflow-x: hidden;
            background-color: #f0f9ff;
        }

        /* --- Animated Mesh Gradient --- */
        .bg-mesh {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1;
            background: radial-gradient(at 0% 0%, hsla(210,100%,76%,1) 0, transparent 50%), 
                        radial-gradient(at 50% 0%, hsla(190,100%,86%,1) 0, transparent 50%), 
                        radial-gradient(at 100% 0%, hsla(220,100%,70%,1) 0, transparent 50%);
            background-size: 200% 200%;
            animation: gradientBG 15s ease infinite;
        }
        .blob { position: fixed; border-radius: 50%; filter: blur(80px); z-index: -1; opacity: 0.6; animation: float 10s infinite ease-in-out; }
        .blob-1 { top: 10%; left: 10%; width: 300px; height: 300px; background: #60a5fa; }
        .blob-2 { bottom: 20%; right: 10%; width: 400px; height: 400px; background: #3b82f6; animation-delay: -2s; }
        .blob-3 { top: 40%; left: 60%; width: 250px; height: 250px; background: #93c5fd; animation-delay: -4s; }

        @keyframes float { 0%, 100% { transform: translate(0, 0); } 33% { transform: translate(30px, -50px); } 66% { transform: translate(-20px, 20px); } }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* --- Glass Cards --- */
        .glass-card {
            background: var(--glass-bg); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border); box-shadow: var(--glass-shadow); border-radius: 1.5rem;
            padding: 2rem; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .glass-card:hover { transform: translateY(-5px) scale(1.01); background: rgba(255, 255, 255, 0.4); border-color: #fff; box-shadow: 0 15px 40px rgba(37, 99, 235, 0.2); }
        .hero-glass { background: linear-gradient(135deg, rgba(37, 99, 235, 0.85) 0%, rgba(59, 130, 246, 0.75) 100%); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); color: white; box-shadow: 0 20px 50px rgba(37, 99, 235, 0.3); }

        /* --- Modals (Service Details) --- */
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px);
            z-index: 100; display: none; justify-content: center; items-center; opacity: 0; transition: opacity 0.3s;
        }
        .modal-backdrop.show { display: flex; opacity: 1; }
        .modal-content {
            background: rgba(255, 255, 255, 0.95); width: 90%; max-width: 800px; max-height: 90vh;
            border-radius: 2rem; overflow-y: auto; padding: 2rem; position: relative;
            transform: scale(0.9); transition: transform 0.3s; border: 1px solid white;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .modal-backdrop.show .modal-content { transform: scale(1); }

        /* --- Admin & Editable --- */
        .admin-visible-only { display: none !important; }
        .admin-mode .admin-visible-only { display: inline-flex !important; animation: fadeIn 0.5s; }
        .editable-active { border: 2px dashed #fbbf24 !important; cursor: text; background-color: rgba(255, 255, 255, 0.95); }
        .editable-img-active { cursor: pointer; border: 4px solid #fbbf24; opacity: 0.9; }
        .editable-img-active::after { content: "üì∏ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px; pointer-events: none; }

        .booking-slot { cursor: pointer; transition: all 0.3s; font-weight: 600; font-size: 1.1rem; }
        .booking-slot:hover { transform: scale(1.1); z-index: 10; border-color: #2563eb; }
        
        /* High Contrast Booking Colors */
        .booking-slot.booked { 
            background-color: #fca5a5; /* Stronger Red */
            color: #7f1d1d; 
            border: 2px solid #ef4444; 
        }
        .booking-slot.available { 
            background-color: #86efac; /* Stronger Green */
            color: #14532d; 
            border: 2px solid #22c55e; 
        }
        
        #loading-overlay { position: fixed; inset: 0; background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); z-index: 9999; display: flex; justify-content: center; items-center; flex-direction: column; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="bg-mesh"></div>
    <div class="blob blob-1"></div><div class="blob blob-2"></div><div class="blob blob-3"></div>

    <!-- Loading Screen -->
    <div id="loading-overlay">
        <div class="relative w-20 h-20"><div class="absolute inset-0 border-4 border-blue-200 rounded-full animate-ping"></div><div class="absolute inset-0 border-4 border-blue-600 rounded-full animate-spin border-t-transparent"></div></div>
        <p class="text-blue-700 font-bold mt-4 text-lg">Work Flow</p>
        <p class="text-blue-400 text-sm" id="loading-status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
    </div>

    <!-- Inputs -->
    <input type="file" id="imageUploadInput" accept="image/*" style="display: none;">
    <input type="file" id="fileUploadInput" accept=".pdf,.doc,.docx,.zip,.jpg,.png" style="display: none;">

    <!-- Admin Tools -->
    <div id="admin-tools" class="fixed bottom-6 right-6 z-50 flex flex-col items-end gap-3">
        <button id="saveButton" onclick="saveToDatabase()" class="hidden bg-green-500 text-white px-6 py-3 rounded-full shadow-2xl hover:bg-green-600 flex items-center gap-2 transition-all transform hover:scale-105 backdrop-blur-md border border-white/40 font-semibold text-sm">
            <i class="fas fa-save"></i> <span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</span>
        </button>
        <button id="editToggle" onclick="toggleEditMode()" class="bg-gray-900/90 text-white px-6 py-3 rounded-full shadow-2xl hover:bg-black flex items-center gap-2 transition-all transform hover:scale-105 backdrop-blur-md border border-white/40 text-sm font-semibold">
            <i class="fas fa-user-shield"></i> <span>‡πÇ‡∏´‡∏°‡∏î‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</span>
        </button>
    </div>

    <!-- Nav -->
    <nav class="sticky top-0 z-40 glass-card !rounded-none !border-t-0 !border-x-0 border-b border-white/40 shadow-sm mx-0 px-0 py-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 items-center">
                <div class="flex items-center gap-3"><div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-cyan-400 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-lg">W</div><span class="text-2xl font-extrabold tracking-tight text-blue-900">Work Flow</span></div>
                <div class="hidden md:flex space-x-10 items-center">
                    <a href="#about" class="text-blue-900 font-semibold hover:text-blue-600 transition">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
                    <a href="#services" class="text-blue-900 font-semibold hover:text-blue-600 transition">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ & ‡∏£‡∏≤‡∏Ñ‡∏≤</a>
                    <a href="#portfolio" class="text-blue-900 font-semibold hover:text-blue-600 transition">‡∏ú‡∏•‡∏á‡∏≤‡∏ô</a>
                    <a href="#booking" class="text-blue-900 font-semibold hover:text-blue-600 transition">‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</a>
                    <a href="#contact" class="bg-blue-600 text-white px-8 py-3 rounded-full text-sm font-bold hover:bg-blue-700 transition shadow-lg">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16">
        
        <!-- Hero -->
        <div data-aos="fade-up" class="hero-glass rounded-[2.5rem] p-10 md:p-24 text-center relative overflow-hidden">
            <div class="relative z-10 flex flex-col items-center">
                <h1 id="hero-title" class="text-5xl md:text-8xl font-extrabold mb-8 tracking-tight leading-none editable drop-shadow-lg" contenteditable="false">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏á‡∏≤‡∏ô‡∏¢‡∏≤‡∏Å <br class="md:hidden"> ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢</h1>
                <p id="hero-desc" class="text-xl md:text-3xl text-blue-50 max-w-4xl mx-auto mb-12 font-light leading-relaxed editable" contenteditable="false">Work Flow ‡∏£‡∏±‡∏ö‡∏à‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå ‡∏á‡∏≤‡∏ô‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠ ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-6 w-full sm:w-auto">
                    <a href="#booking" class="bg-white text-blue-700 px-12 py-5 rounded-2xl font-extrabold text-lg shadow-xl hover:bg-gray-50 transition border border-white">‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</a>
                    <button id="upload-btn-trigger" class="admin-visible-only bg-yellow-400 text-yellow-900 px-12 py-5 rounded-2xl font-bold text-lg shadow-lg hover:bg-yellow-300 transition items-center gap-2 border border-yellow-200">
                        <i class="fas fa-cloud-upload-alt"></i> ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå
                    </button>
                </div>
                <div id="public-download-area" class="mt-10 hidden animate-bounce">
                    <a id="download-btn" href="#" target="_blank" class="inline-flex items-center gap-3 text-white/90 hover:text-white bg-white/10 px-8 py-3 rounded-full border border-white/30 backdrop-blur-sm transition hover:bg-white/20 text-sm font-medium">
                        <i class="fas fa-file-pdf text-red-300 text-xl"></i> <span id="download-text">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Company Profile</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Services Section -->
        <div id="services" class="col-span-1 md:col-span-3 lg:col-span-4 grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- S1 -->
            <div onclick="openModal('modal-service-1')" class="glass-card group cursor-pointer p-0 overflow-hidden transform hover:-translate-y-2 transition duration-300" data-aos="fade-up" data-aos-delay="100">
                <div class="h-64 bg-gray-100 overflow-hidden relative">
                     <img id="serv-img-1" src="https://placehold.co/600x400/e2e8f0/64748b?text=Presentation" class="w-full h-full object-cover editable-img transition duration-700 group-hover:scale-110">
                     <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition"><span class="text-white font-bold border border-white/50 px-4 py-2 rounded-full backdrop-blur-sm">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span></div>
                </div>
                <div class="p-6">
                    <h3 id="serv-title-1" class="text-2xl font-bold text-gray-800 mb-2 editable" contenteditable="false">‡∏á‡∏≤‡∏ô‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠</h3>
                    <p id="serv-desc-1" class="text-gray-500 text-base editable" contenteditable="false">PowerPoint, Canva, Keynote</p>
                </div>
            </div>
            <!-- S2 -->
            <div onclick="openModal('modal-service-2')" class="glass-card group cursor-pointer p-0 overflow-hidden transform hover:-translate-y-2 transition duration-300" data-aos="fade-up" data-aos-delay="200">
                <div class="h-64 bg-gray-100 overflow-hidden relative">
                    <img id="serv-img-2" src="https://placehold.co/600x800/f3e8ff/7e22ce?text=Report" class="w-full h-full object-cover editable-img transition duration-700 group-hover:scale-110">
                    <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition"><span class="text-white font-bold border border-white/50 px-4 py-2 rounded-full backdrop-blur-sm">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span></div>
                </div>
                <div class="p-6">
                    <h3 id="serv-title-2" class="text-2xl font-bold text-gray-800 mb-2 editable" contenteditable="false">‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</h3>
                    <p id="serv-desc-2" class="text-gray-500 text-base editable" contenteditable="false">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏á‡∏≤‡∏ô, ‡∏à‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤, ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
                </div>
            </div>
            <!-- S3 -->
            <div onclick="openModal('modal-service-3')" class="glass-card group cursor-pointer p-0 overflow-hidden transform hover:-translate-y-2 transition duration-300" data-aos="fade-up" data-aos-delay="300">
                <div class="h-64 bg-gray-100 overflow-hidden relative">
                    <img id="serv-img-3" src="https://placehold.co/600x400/ffedd5/c2410c?text=Admin" class="w-full h-full object-cover editable-img transition duration-700 group-hover:scale-110">
                    <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition"><span class="text-white font-bold border border-white/50 px-4 py-2 rounded-full backdrop-blur-sm">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span></div>
                </div>
                <div class="p-6">
                    <h3 id="serv-title-3" class="text-2xl font-bold text-gray-800 mb-2 editable" contenteditable="false">‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</h3>
                    <p id="serv-desc-3" class="text-gray-500 text-base editable" contenteditable="false">‡∏ï‡∏≠‡∏ö‡πÅ‡∏ä‡∏ó, ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô</p>
                </div>
            </div>
        </div>

        <!-- Booking Section (Restored & Enhanced) -->
        <div id="booking" class="glass-card col-span-1 md:col-span-2 lg:col-span-3 p-8">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-extrabold text-gray-800 flex items-center gap-4">
                    <i class="far fa-calendar-check text-green-500 text-3xl"></i> ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡∏á‡∏≤‡∏ô
                </h2>
                <div class="flex gap-3 text-sm font-medium">
                    <span class="flex items-center gap-2 bg-green-50 text-green-700 px-4 py-2 rounded-full border border-green-200"><div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div> ‡∏ß‡πà‡∏≤‡∏á</span>
                    <span class="flex items-center gap-2 bg-red-50 text-red-700 px-4 py-2 rounded-full border border-red-200"><div class="w-3 h-3 bg-red-500 rounded-full"></div> ‡πÄ‡∏ï‡πá‡∏°</span>
                </div>
            </div>
            <p id="booking-desc" class="text-base text-gray-500 mb-8 editable" contenteditable="false">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏¥‡∏ß‡∏ß‡πà‡∏≤‡∏á (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Real-time)</p>
            
            <div id="calendar-grid" class="grid grid-cols-7 gap-4 text-center text-base font-medium mb-6">
                <!-- Calendar generated by JS -->
            </div>
            <div id="booking-message" class="mt-6 p-6 rounded-2xl hidden text-lg font-medium text-center shadow-lg border-l-8 transition-all"></div>
        </div>

        <!-- Contact Section -->
        <div id="contact" class="glass-card bg-gradient-to-b from-gray-900 to-gray-800 text-white !border-gray-700 shadow-2xl p-8" data-aos="flip-up">
            <h2 class="text-3xl font-extrabold mb-8 text-center">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Facebook -->
                <a href="https://www.facebook.com/profile.php?id=61583096235430" target="_blank" class="flex flex-col items-center gap-3 p-6 bg-white/5 rounded-2xl hover:bg-blue-600/20 hover:border-blue-500/50 transition border border-white/10 group backdrop-blur-md text-center">
                    <img id="logo-fb" src="https://placehold.co/80x80/1877F2/ffffff?text=FB" class="w-16 h-16 rounded-full object-cover editable-img border-2 border-white/20 shadow-lg group-hover:scale-110 transition">
                    <div>
                        <p class="text-sm text-gray-400">Facebook Page</p>
                        <p class="font-bold text-xl group-hover:text-blue-400 transition">Work Flow</p>
                    </div>
                </a>
                
                <!-- TikTok -->
                <a href="https://www.tiktok.com/@workflow044" target="_blank" class="flex flex-col items-center gap-3 p-6 bg-white/5 rounded-2xl hover:bg-pink-600/20 hover:border-pink-500/50 transition border border-white/10 group backdrop-blur-md text-center">
                    <img id="logo-tt" src="https://placehold.co/80x80/000000/ffffff?text=TikTok" class="w-16 h-16 rounded-full object-cover editable-img border-2 border-white/20 shadow-lg group-hover:scale-110 transition">
                    <div>
                        <p class="text-sm text-gray-400">TikTok Channel</p>
                        <p class="font-bold text-xl group-hover:text-pink-400 transition">@workflow044</p>
                    </div>
                </a>

                <!-- Phone -->
                <a href="tel:0982165174" class="flex flex-col items-center gap-3 p-6 bg-white/5 rounded-2xl hover:bg-green-600/20 hover:border-green-500/50 transition border border-white/10 group backdrop-blur-md text-center">
                    <img id="logo-ph" src="https://placehold.co/80x80/22c55e/ffffff?text=Tel" class="w-16 h-16 rounded-full object-cover editable-img border-2 border-white/20 shadow-lg group-hover:scale-110 transition">
                    <div>
                        <p class="text-sm text-gray-400">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</p>
                        <p class="font-bold text-xl group-hover:text-green-400 transition">098-216-5174</p>
                    </div>
                </a>
            </div>
        </div>
    </main>

    <!-- MODALS -->
    <div id="modal-service-1" class="modal-backdrop" onclick="closeModal('modal-service-1')"><div class="modal-content" onclick="event.stopPropagation()"><button onclick="closeModal('modal-service-1')" class="absolute top-4 right-4 text-gray-400 hover:text-red-500 text-2xl"><i class="fas fa-times"></i></button><div class="grid md:grid-cols-2 gap-8"><div><img id="modal-img-1" src="https://placehold.co/600x800/e2e8f0/64748b?text=Presentation+Details" class="w-full rounded-xl shadow-md editable-img"></div><div><h2 id="modal-title-1" class="text-3xl font-bold text-blue-900 mb-4 editable" contenteditable="false">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ‡∏á‡∏≤‡∏ô‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠</h2><p id="modal-desc-1" class="text-gray-600 mb-6 leading-relaxed editable" contenteditable="false">‡πÄ‡∏£‡∏≤‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Presentation ‡∏ó‡∏∏‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö...</p><div class="bg-blue-50 p-6 rounded-xl border border-blue-100"><h3 class="font-bold text-blue-800 mb-3">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3><ul id="modal-price-1" class="space-y-2 text-sm text-gray-700 editable" contenteditable="false"><li>‚Ä¢ ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Canva: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 500 ‡∏ö‡∏≤‡∏ó</li></ul></div></div></div></div></div>
    <div id="modal-service-2" class="modal-backdrop" onclick="closeModal('modal-service-2')"><div class="modal-content" onclick="event.stopPropagation()"><button onclick="closeModal('modal-service-2')" class="absolute top-4 right-4 text-gray-400 hover:text-red-500 text-2xl"><i class="fas fa-times"></i></button><div class="grid md:grid-cols-2 gap-8"><div><img id="modal-img-2" src="https://placehold.co/600x800/f3e8ff/7e22ce?text=Document+Details" class="w-full rounded-xl shadow-md editable-img"></div><div><h2 id="modal-title-2" class="text-3xl font-bold text-blue-900 mb-4 editable" contenteditable="false">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</h2><p id="modal-desc-2" class="text-gray-600 mb-6 leading-relaxed editable" contenteditable="false">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏á‡∏≤‡∏ô ‡∏à‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£...</p><div class="bg-purple-50 p-6 rounded-xl border border-purple-100"><h3 class="font-bold text-purple-800 mb-3">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3><ul id="modal-price-2" class="space-y-2 text-sm text-gray-700 editable" contenteditable="false"><li>‚Ä¢ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏á‡∏≤‡∏ô: 15-20 ‡∏ö‡∏≤‡∏ó/‡∏´‡∏ô‡πâ‡∏≤</li></ul></div></div></div></div></div>
    <div id="modal-service-3" class="modal-backdrop" onclick="closeModal('modal-service-3')"><div class="modal-content" onclick="event.stopPropagation()"><button onclick="closeModal('modal-service-3')" class="absolute top-4 right-4 text-gray-400 hover:text-red-500 text-2xl"><i class="fas fa-times"></i></button><div class="grid md:grid-cols-2 gap-8"><div><img id="modal-img-3" src="https://placehold.co/600x800/ffedd5/c2410c?text=Admin+Details" class="w-full rounded-xl shadow-md editable-img"></div><div><h2 id="modal-title-3" class="text-3xl font-bold text-blue-900 mb-4 editable" contenteditable="false">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</h2><p id="modal-desc-3" class="text-gray-600 mb-6 leading-relaxed editable" contenteditable="false">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ Admin ‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏û‡∏à ‡∏ï‡∏≠‡∏ö‡πÅ‡∏ä‡∏ó...</p><div class="bg-orange-50 p-6 rounded-xl border border-orange-100"><h3 class="font-bold text-orange-800 mb-3">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3><ul id="modal-price-3" class="space-y-2 text-sm text-gray-700 editable" contenteditable="false"><li>‚Ä¢ ‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏û‡∏à: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 4,500 ‡∏ö‡∏≤‡∏ó</li></ul></div></div></div></div></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script> AOS.init({ duration: 800, once: true }); </script>

    <script type="module">
        import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAfzanJaJ-9tpML1slfMAdwCF6jHWJRoyQ",
            authDomain: "work-flows-ac364.firebaseapp.com",
            projectId: "work-flows-ac364",
            storageBucket: "work-flows-ac364.firebasestorage.app",
            messagingSenderId: "1094886604901",
            appId: "1:1094886604901:web:ec9b2967b629d24d46868c",
            measurementId: "G-1KK8D48FZ7"
        };

        let app;
        const appName = "WorkFlow-Production-Final-v6";
        try {
            if (getApps().some(a => a.name === appName)) app = getApp(appName);
            else app = initializeApp(firebaseConfig, appName);
        } catch (e) { document.getElementById('loading-status').innerText = "Init Error"; }

        const auth = getAuth(app);
        const db = getFirestore(app);
        let currentUser = null;
        let isEditMode = false;
        let dbData = { bookedDates: [5, 12] }; 
        const docRef = doc(db, 'website_content', 'main_data');

        signInAnonymously(auth).catch(e => console.error(e));

        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                onSnapshot(docRef, (snapshot) => {
                    document.getElementById('loading-overlay').style.display = 'none';
                    if (snapshot.exists()) {
                        dbData = snapshot.data();
                        renderContent(dbData);
                    } else { 
                        saveToDatabase(true); 
                        renderContent(dbData); // Force render initial state
                    }
                });
            }
        });

        window.openModal = (id) => document.getElementById(id).classList.add('show');
        window.closeModal = (id) => document.getElementById(id).classList.remove('show');

        function renderContent(data) {
            if(data.text) Object.entries(data.text).forEach(([id, t]) => { 
                const el = document.getElementById(id); 
                if(el && !isEditMode) el.textContent = t; 
            });
            if(data.images) Object.entries(data.images).forEach(([id, s]) => { const el = document.getElementById(id); if(el) el.src = s; });
            const dlArea = document.getElementById('public-download-area');
            const dlBtn = document.getElementById('download-btn');
            if (data.files && data.files['company_profile']) {
                dlBtn.href = data.files['company_profile'];
                dlArea.classList.remove('hidden'); 
            } else { dlArea.classList.add('hidden'); }
            
            // Ensure booking always renders
            renderCalendar(data.bookedDates || []);
        }

        function renderCalendar(bookedDates) {
            const grid = document.getElementById('calendar-grid');
            if (!grid) return;
            const now = new Date();
            const daysInMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
            const startDay = new Date(now.getFullYear(), now.getMonth(), 1).getDay();
            
            grid.innerHTML = '';
            ['‡∏≠‡∏≤','‡∏à','‡∏≠','‡∏û','‡∏û‡∏§','‡∏®','‡∏™'].forEach(d => grid.innerHTML += `<div class="text-gray-400 font-bold">${d}</div>`);
            for(let i=0; i<startDay; i++) grid.innerHTML += '<div></div>';
            
            for (let i = 1; i <= daysInMonth; i++) {
                const div = document.createElement('div');
                div.textContent = i;
                div.className = `p-3 rounded-xl border border-gray-200 text-lg font-semibold booking-slot flex items-center justify-center shadow-sm ${bookedDates.includes(i) ? 'booked' : 'available'}`;
                div.onclick = () => handleDateClick(i);
                grid.appendChild(div);
            }
        }

        window.handleDateClick = (day) => {
            const msg = document.getElementById('booking-message');
            msg.className = "mt-6 p-6 rounded-2xl text-lg font-medium text-center shadow-lg border-l-8 transition-all";
            
            if (isEditMode) {
                const idx = dbData.bookedDates.indexOf(day);
                if (idx > -1) dbData.bookedDates.splice(idx, 1); else dbData.bookedDates.push(day);
                renderCalendar(dbData.bookedDates);
                msg.classList.add('bg-blue-50', 'text-blue-700', 'border-blue-500');
                msg.innerHTML = `<i class="fas fa-info-circle"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${day} ‡πÅ‡∏•‡πâ‡∏ß (‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)`;
            } else {
                if (dbData.bookedDates.includes(day)) {
                    msg.classList.add('bg-red-50', 'text-red-700', 'border-red-500');
                    msg.innerHTML = `<i class="fas fa-times-circle"></i> ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${day} ‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö`;
                } else {
                    msg.classList.add('bg-green-50', 'text-green-700', 'border-green-500');
                    msg.innerHTML = `<i class="fas fa-check-circle"></i> ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${day} ‡∏ß‡πà‡∏≤‡∏á! <a href="https://www.facebook.com/profile.php?id=61583096235430" target="_blank" class="underline font-bold hover:text-green-900">‡∏ó‡∏±‡∏Å‡∏à‡∏≠‡∏á‡πÄ‡∏•‡∏¢</a>`;
                }
            }
            msg.classList.remove('hidden');
        };

        window.saveToDatabase = async () => {
            if (!currentUser) return;
            const textData = {}; 
            document.querySelectorAll('.editable').forEach(el => textData[el.id] = el.textContent);
            const imageData = {}; 
            document.querySelectorAll('.editable-img').forEach(el => imageData[el.id] = el.src);
            const fileData = {};
            const dlBtn = document.getElementById('download-btn');
            if(dlBtn.getAttribute('href') !== '#') fileData['company_profile'] = dlBtn.getAttribute('href');

            const newData = { text: textData, images: imageData, files: fileData, bookedDates: dbData.bookedDates };
            try {
                if (new Blob([JSON.stringify(newData)]).size > 950000) return alert("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1MB");
                await setDoc(docRef, newData);
                alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‚úÖ");
                if(isEditMode) toggleEditMode();
            } catch(e) { alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + e.message); }
        };

        window.toggleEditMode = () => {
            const btn = document.getElementById('editToggle');
            const saveBtn = document.getElementById('saveButton');
            const body = document.body;

            if (!isEditMode) {
                if (prompt("‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™ Admin:") !== "admin") return alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î");
                isEditMode = true;
                body.classList.add('admin-mode');
                
                document.querySelectorAll('.editable').forEach(el => { el.contentEditable = "true"; el.classList.add('editable-active'); });
                document.querySelectorAll('.editable-img').forEach(el => {
                    el.classList.add('editable-img-active');
                    el.onclick = function() { window.currentImageElement = this; document.getElementById('imageUploadInput').click(); };
                });
                document.getElementById('upload-btn-trigger').onclick = () => {
                    if(confirm("‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏ü‡∏•‡πå PDF ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏°‡πà?")) document.getElementById('fileUploadInput').click();
                };

                btn.innerHTML = '<i class="fas fa-times"></i> <span>‡∏≠‡∏≠‡∏Å</span>';
                btn.classList.replace('bg-gray-900/90', 'bg-red-600/90');
                saveBtn.classList.remove('hidden');
            } else {
                isEditMode = false;
                body.classList.remove('admin-mode');
                document.querySelectorAll('.editable').forEach(el => { el.contentEditable = "false"; el.classList.remove('editable-active'); });
                document.querySelectorAll('.editable-img').forEach(el => { el.classList.remove('editable-img-active'); el.onclick = null; });
                btn.innerHTML = '<i class="fas fa-user-shield"></i> <span>‡πÇ‡∏´‡∏°‡∏î‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</span>';
                btn.classList.replace('bg-red-600/90', 'bg-gray-900/90');
                saveBtn.classList.add('hidden');
                renderCalendar(dbData.bookedDates);
            }
        };

        document.getElementById('imageUploadInput').onchange = (e) => handleFile(e, 'image');
        document.getElementById('fileUploadInput').onchange = (e) => handleFile(e, 'file');

        function handleFile(e, type) {
            const file = e.target.files[0];
            if (!file) return;
            if (file.size > 950000) return alert("‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô 950KB");
            const reader = new FileReader();
            reader.onload = (evt) => {
                if (type === 'image' && window.currentImageElement) window.currentImageElement.src = evt.target.result;
                else if (type === 'file') {
                    document.getElementById('download-btn').href = evt.target.result;
                    document.getElementById('public-download-area').classList.remove('hidden');
                    alert("‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô");
                }
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>
